
# ‚öôÔ∏è Esp2Rus_bot ‚Äî –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –ë–î (Installer Engine)

## üéØ –¶–µ–ª—å:
–°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (create/replace), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –±—ã—Å—Ç—Ä–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–ø–∏—Å–∫–æ–º –æ–±—ä–µ–∫—Ç–æ–≤
- –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ .py –Ω–∞ –∫–∞–∂–¥—É—é —Ç–∞–±–ª–∏—Ü—É

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
db/
‚îú‚îÄ‚îÄ create/                        # –•—Ä–∞–Ω–∏–º SQL-—Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ create_table_client_info.sql
‚îÇ   ‚îú‚îÄ‚îÄ create_table_learned_words.sql
‚îÇ   ‚îú‚îÄ‚îÄ create_view_user_progress_by_theme.sql
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ install_config.py              # –û–ø–∏—Å—ã–≤–∞–µ—Ç, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
‚îú‚îÄ‚îÄ run_install.py                 # –û—Å–Ω–æ–≤–Ω–æ–π —É–ø—Ä–∞–≤–ª—è—é—â–∏–π —Å–∫—Ä–∏–ø—Ç
```

---

## üìÑ install_config.py

```python
INSTALL_SCHEMA = {
    "tables": [
        "client_info",
        "client_activity_log",
        "learned_words",
        ...
    ],
    "views": [
        "view_user_progress_by_theme",
        "view_personalized_words"
    ]
}
```

---

## üõ† –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã run_install.py

1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ –∏–∑ `install_config.py`
2. –î–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤ –ë–î
   - –î–µ–ª–∞e—Ç –∞—Ä—Ö–∏–≤ —Ç–∞–±–ª–∏—Ü—ã (`CREATE TABLE backup_<name> AS SELECT * FROM <name>`)
   - –£–¥–∞–ª—è–µ—Ç —Ç–µ–∫—É—â—É—é —Ç–∞–±–ª–∏—Ü—É (`DROP TABLE IF EXISTS ... CASCADE`)
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç SQL –∏–∑ —Ñ–∞–π–ª–∞ `create/create_table_<name>.sql`
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ VIEW:
   - –£–¥–∞–ª—è–µ—Ç —Ç–µ–∫—É—â–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (`DROP VIEW IF EXISTS ...`)
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç SQL –∏–∑ —Ñ–∞–π–ª–∞ `create/create_view_<name>.sql`
4. –í–µ–¥—ë—Ç –ª–æ–≥ –ø–æ –∫–∞–∂–¥–æ–º—É —à–∞–≥—É

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- ‚ùå –ù–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –ø–∏—Å–∞—Ç—å `create_*.py` –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ –£–¥–æ–±–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü –≤ –±—É–¥—É—â–µ–º (—á–µ—Ä–µ–∑ SQL + config)
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ç–µ–∫—É—â–∏–º `run_install.py` (–∞–¥–∞–ø—Ç–∏—Ä—É–µ–º)

---

## üì¶ –ü–æ—Ç–æ–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. –°–æ–∑–¥–∞—ë—à—å SQL-—Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ `create/` (—Ç–µ—Å—Ç–∏—Ä—É–µ—à—å —Å–Ω–∞—á–∞–ª–∞ –≤ DBeaver)
2. –î–æ–±–∞–≤–ª—è–µ—à—å –∏–º—è —Ç–∞–±–ª–∏—Ü—ã/view –≤ `install_config.py`
3. –ó–∞–ø—É—Å–∫–∞–µ—à—å `run_install.py`
4. –í—Å—ë —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üîê –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ PostgreSQL
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (asyncpg + os)
- –õ–æ–≥–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–π (–º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω—ã–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏ = –±–µ–∑–æ–ø–∞—Å–Ω—ã)

---

