
# üìä –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ Esp2Rus_bot v2

## –≠—Ç–∞–ø 0. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `analytics/metrics/` —Å–æ–∑–¥–∞–Ω–∞  
‚úÖ `save_client_activity_log.py` ‚Äî –ª–æ–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏  
‚úÖ `save_client_analytics.py` ‚Äî –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä  
‚úÖ `calculate_quiz_weight_with_fetch` ‚Äî —Ä–∞—Å—á—ë—Ç —á–µ—Ä–µ–∑ view  

---

## –≠—Ç–∞–ø 1. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
üü° –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ `USE_ANALYTICS_V2 = True`  
üü° –ü—Ä–∏ —Ñ–ª–∞–≥–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π —Å—Ç–µ–∫  
üü° –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –≤ `logs/analytics_debug/`  
üü° –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ quiz_weight, client_rating, level_id_current  

---

## –≠—Ç–∞–ø 2. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Å—Ç–µ–∫–∞ (staging)
üîÑ –í–∫–ª—é—á–∏—Ç—å `USE_ANALYTICS_V2 = True` –≤ `@Test_Esp2Rus_bot`  
‚úÖ –¢–µ—Å—Ç –∫–µ–π—Å—ã –ø–æ –≤—Å–µ–º –º–µ—Ç—Ä–∏–∫–∞–º  
‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –≤ client_analytics  

---

## –≠—Ç–∞–ø 3. –ü—Ä–æ–¥–∞–∫—à–Ω –∑–∞–ø—É—Å–∫
üü¢ –ü–æ–¥–∫–ª—é—á–∏—Ç—å `save_client_activity_log` –≤ –±–æ–µ–≤–æ–º –±–æ—Ç–µ  
üì¶ –ó–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –≤ `analytics_old/`  
üìù –û–±–Ω–æ–≤–∏—Ç—å `README.md`, `docs/`, schema_v4.png  

---

## –≠—Ç–∞–ø 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–∫–∞—Ç
üßæ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—á—ë—Ç–æ–≤ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π  
üõë –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –æ—Ç–∫–∞—Ç—É —á–µ—Ä–µ–∑ `.env`  
üîÅ –°–∫—Ä–∏–ø—Ç `rollback_analytics.py` –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ —Å—Ç–∞—Ä–æ–º—É —Å—Ç–µ–∫—É  
