
# üîÅ –ü–ª–∞–Ω –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –Ω–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö Esp2Rus_v2dev (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ v2)

---

## üéØ –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–æ–≤—É—é –ë–î `esp2rus_v2dev`, –≤ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥–µ—Ç:

- –ß–∏—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Installer Engine (`run_install.py`)
- –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏ VIEW —Å–æ–∑–¥–∞–Ω—ã –ø–æ –µ–¥–∏–Ω–æ–π –ª–æ–≥–∏–∫–µ
- –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ —Ä–∏—Å–∫–∞ —Å–ª–æ–º–∞—Ç—å –ø—Ä–æ–¥

---

## üìã –≠—Ç–∞–ø—ã –º–∏–≥—Ä–∞—Ü–∏–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –±–∞–∑—ã `esp2rus_v2dev`

- –°–æ–∑–¥–∞—Ç—å –ë–î —á–µ—Ä–µ–∑ DBeaver –∏–ª–∏ –∫–æ–º–∞–Ω–¥–æ–π:
  ```bash
  createdb esp2rus_v2dev
  ```

- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `postgres` –∏–ª–∏ `esp_admin` –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞

- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ `.env` –∏–ª–∏ `.pg_service.conf`, –Ω–∞–ø—Ä–∏–º–µ—Ä:
  ```
  DB_NAME=esp2rus_v2dev
  ```

---

### 2. –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

- –í—ã–∑–≤–∞—Ç—å:
  ```bash
  python db/run_install.py --db esp2rus_v2dev
  ```

- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ create_table_*.sql –∏ create_view_*.sql –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã, —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏, —Å–≤—è–∑–∏, VIEW

---

### 3. –ü–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö (–∏–∑ prod –≤ dev)

–ü–æ—à–∞–≥–æ–≤—ã–π –ø–µ—Ä–µ–Ω–æ—Å:
- `client_info`  
  ```sql
  INSERT INTO esp2rus_v2dev.client_info SELECT * FROM esp2rus_prod.client_info;
  ```

- `dictionary`, `word_category`, `study_levels` ‚Äî –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –∫–∞–∫ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏

- `client_activity_log`, `client_analytics` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

üîÅ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `COPY TO/FROM`, DBeaver —ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç, –∏–ª–∏ pg_dump/pg_restore

---

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏

- –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞ –∫ `esp2rus_v2dev`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ user_word_stats, learned_words
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å auto-–ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ `level_id_current`

---

### 5. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –ø—Ä–æ–¥

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DBeaver: —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ö–µ–º `prod` vs `v2dev`
- –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ª–∏—á–∏—è
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å `migration_to_v2.sql` (—Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü, –±–µ–∑ DROP)

---

### 6. –ü–µ—Ä–µ–Ω–æ—Å –Ω–∞ –ø—Ä–æ–¥ (–æ—Ç–¥–µ–ª—å–Ω—ã–π —ç—Ç–∞–ø)

- –ü–æ—Å–ª–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∏–ª–∏ –ø–µ—Ä–µ–∫–∏–Ω—É—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞—Ç–Ω–æ –∏–∑ `esp2rus_v2dev`
- –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å `.env.prod` –Ω–∞ –Ω–æ–≤—É—é –ë–î (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üõ† –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ 2 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: esp2rus_prod –∏ esp2rus_v2dev
- run_install –¥–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤—ã–±–æ—Ä –ë–î —á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç –∏–ª–∏ ENV
- –í—Å–µ create- –∏ view-—Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ `db/create/`

---

## üß† –ë–æ–Ω—É—Å-–æ–ø—Ü–∏–∏

- –°–æ–∑–¥–∞—Ç—å `scripts/compare_schemas.py` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä
- –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö: `backup/export_*.sql`, `import/*.sql`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `--dry-run` –¥–ª—è run_install (—Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤)

